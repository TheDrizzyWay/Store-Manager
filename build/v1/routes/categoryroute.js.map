{"version":3,"sources":["../../../api/v1/routes/categoryroute.js"],"names":["router","express","Router","checkCategoryId","param","req","res","next","id","database","query","result","rowCount","status","send","message","error","post","authenticate","adminAuth","categoryController","createCategory","get","getAllCategories","getCategoryById","put","updateCategory","delete","productController","deleteCategory"],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;;;AAEA,IAAMA,SAASC,kBAAQC,MAAR,EAAf;;AAEA,IAAMC,kBAAkBH,OAAOI,KAAP,CAAa,IAAb;AAAA,sFAAmB,iBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,EAAuBC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAElBC,mBAASC,KAAT,CAAe,yCAAf,EAA0D,CAACF,EAAD,CAA1D,CAFkB;;AAAA;AAEjCG,kBAFiC;;AAAA,kBAGnCA,OAAOC,QAAP,IAAmB,CAHgB;AAAA;AAAA;AAAA;;AAIrCN,gBAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,gCAA8BP,EAA9B,oBAAF,EAArB;AAJqC;;AAAA;AAOvCD;AAPuC;AAAA;;AAAA;AAAA;AAAA;AAQ9BQ,mBAR8B,eAQ9BA,OAR8B;;AASvCT,gBAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,OAAO,EAAED,SAAS,uCAAX,EAAT,EAArB;;AATuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAAA;AAAA;AAAA;AAAA,IAAxB;;AAaAf,OAAOiB,IAAP,CAAY,GAAZ,EAAiBC,wBAAjB,EAA+BC,qBAA/B,EAA0CC,6BAAmBC,cAA7D;AACArB,OAAOsB,GAAP,CAAW,GAAX,EAAgBJ,wBAAhB,EAA8BE,6BAAmBG,gBAAjD;AACAvB,OAAOsB,GAAP,CAAW,MAAX,EAAmBJ,wBAAnB,EAAiCf,eAAjC,EAAkDiB,6BAAmBI,eAArE;AACAxB,OAAOyB,GAAP,CAAW,MAAX,EAAmBP,wBAAnB,EAAiCC,qBAAjC,EAA4ChB,eAA5C,EAA6DiB,6BAAmBM,cAAhF;AACA1B,OAAO2B,MAAP,CAAc,MAAd,EAAsBT,wBAAtB,EAAoCC,qBAApC,EAA+ChB,eAA/C,EAAgEyB,kBAAkBC,cAAlF;;kBAEe7B,M","file":"categoryroute.js","sourcesContent":["import express from 'express';\r\nimport categoryController from '../controllers/categorycontroller';\r\nimport { adminAuth, authenticate } from '../middleware/middleware';\r\nimport database from '../database';\r\n\r\nconst router = express.Router();\r\n\r\nconst checkCategoryId = router.param('id', async (req, res, next, id) => {\r\n  try {\r\n    const result = await database.query('SELECT id FROM categories WHERE id = $1', [id]);\r\n    if (result.rowCount <= 0) {\r\n      res.status(404).send({ message: `Category with ID \"${id}\" was not found` });\r\n      return;\r\n    }\r\n    next();\r\n  } catch ({ message }) {\r\n    res.status(500).send({ error: { message: 'Database error while getting category' } });\r\n  }\r\n});\r\n\r\nrouter.post('/', authenticate, adminAuth, categoryController.createCategory);\r\nrouter.get('/', authenticate, categoryController.getAllCategories);\r\nrouter.get('/:id', authenticate, checkCategoryId, categoryController.getCategoryById);\r\nrouter.put('/:id', authenticate, adminAuth, checkCategoryId, categoryController.updateCategory);\r\nrouter.delete('/:id', authenticate, adminAuth, checkCategoryId, productController.deleteCategory);\r\n\r\nexport default router;\r\n"]}